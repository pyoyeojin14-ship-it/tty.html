<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ëŸ¬ì‹œì•ˆ ë£°ë ›</title>
  <style>
    body { font-family: system-ui, Arial, sans-serif; padding: 24px; }
    .wrap { max-width: 520px; margin: 0 auto; }
    .card { border: 1px solid #ddd; border-radius: 16px; padding: 18px; }
    h1 { margin: 0 0 8px; font-size: 22px; }
    .muted { color: #666; margin: 0 0 14px; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 14px; }
    button {
      padding: 12px 14px; border: 1px solid #ddd; border-radius: 12px;
      background: white; cursor: pointer; font-weight: 700;
    }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
    .status { margin-top: 14px; font-size: 16px; line-height: 1.5; }
    .pill {
      display:inline-block; padding: 6px 10px; border: 1px solid #ddd;
      border-radius: 999px; font-size: 13px; margin-right: 8px;
    }
    .big { font-size: 18px; font-weight: 800; margin-top: 6px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>ğŸ”« ëŸ¬ì‹œì•ˆ ë£°ë ›</h1>
      <p class="muted">íƒ„ì°½ 6ì¹¸ ì¤‘ 1ì¹¸ë§Œ ì´ì•Œ. ë²„íŠ¼ì„ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ ë‹¤ìŒ ì¹¸ìœ¼ë¡œ ì§„í–‰!</p>

      <div>
        <span class="pill" id="infoChamber">íƒ„ì°½: 6</span>
        <span class="pill" id="infoIndex">í˜„ì¬ ì¹¸: -</span>
        <span class="pill" id="infoAlive">ìƒì¡´ íšŸìˆ˜: 0</span>
      </div>

      <div class="row">
        <button id="btnStart">ê²Œì„ ì‹œì‘</button>
        <button id="btnFire" disabled>ë°©ì•„ì‡  ë‹¹ê¸°ê¸°</button>
        <button id="btnReset">ë¦¬ì…‹</button>
      </div>

      <div class="status" id="status">
        ì‹œì‘ì„ ëˆ„ë¥´ë©´ ì´ì•Œ ìœ„ì¹˜ê°€ ëœë¤ìœ¼ë¡œ ì •í•´ì ¸.
      </div>
    </div>
  </div>

  <script>
    // ====== ê²Œì„ ìƒíƒœ(ì¤‘ìš”) ======
    const CHAMBER_SIZE = 6;
    let chamber = [];     // [0,0,0,1,0,0] ì´ëŸ° ì‹
    let index = 0;        // í˜„ì¬ ì¹¸
    let aliveCount = 0;   // ìƒì¡´ íšŸìˆ˜
    let started = false;  // ì‹œì‘ ì—¬ë¶€
    let ended = false;    // ëë‚¬ëŠ”ì§€

    const $status = document.getElementById("status");
    const $infoIndex = document.getElementById("infoIndex");
    const $infoAlive = document.getElementById("infoAlive");
    const $btnStart = document.getElementById("btnStart");
    const $btnFire = document.getElementById("btnFire");
    const $btnReset = document.getElementById("btnReset");

    function render() {
      $infoIndex.textContent = `í˜„ì¬ ì¹¸: ${started ? (index + 1) : "-"}`;
      $infoAlive.textContent = `ìƒì¡´ íšŸìˆ˜: ${aliveCount}`;
    }

    function setStatus(msg) {
      $status.innerHTML = msg;
    }

    // ê²Œì„ ì‹œì‘: ì´ì•Œ ìœ„ì¹˜ëŠ” "ì—¬ê¸°ì„œ ë”± 1ë²ˆë§Œ" ëœë¤ìœ¼ë¡œ ì •í•´ì•¼ ë£°ë ›ì´ ë¨
    function startGame() {
      chamber = new Array(CHAMBER_SIZE).fill(0);
      const bulletPos = Math.floor(Math.random() * CHAMBER_SIZE);
      chamber[bulletPos] = 1;

      index = 0;
      aliveCount = 0;
      started = true;
      ended = false;

      $btnFire.disabled = false;

      setStatus("ê²Œì„ ì‹œì‘! ğŸ˜¬ ë°©ì•„ì‡ ë¥¼ ë‹¹ê²¨ë´.");
      render();

      // ë””ë²„ê·¸ìš©(ì›í•˜ë©´ ì‚­ì œ): ì´ì•Œ ìœ„ì¹˜ í™•ì¸
      // console.log("bulletPos:", bulletPos, chamber);
    }

    function fire() {
      if (!started || ended) return;

      // í˜„ì¬ ì¹¸ í™•ì¸
      const current = chamber[index];

      if (current === 1) {
        ended = true;
        $btnFire.disabled = true;
        setStatus(`ğŸ’¥ íƒ•! <span class="big">ì‚¬ë§...</span><br>ë¦¬ì…‹í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œì‘í•´.`);
        render();
        return;
      }

      // ë¹ˆì¹¸ì´ë©´ ìƒì¡´ + ë‹¤ìŒ ì¹¸ìœ¼ë¡œ
      aliveCount++;
      setStatus(`ğŸ˜® íœ´â€¦ ì‚´ì•˜ë‹¤! (ìƒì¡´ ${aliveCount}íšŒ)<br>ë‹¤ìŒ ì¹¸ìœ¼ë¡œ ë„˜ì–´ê°„ë‹¤â€¦`);
      index++;

      // 6ì¹¸ ë‹¤ ë„˜ê¸°ë©´ ìƒì¡´ ìŠ¹ë¦¬
      if (index >= CHAMBER_SIZE) {
        ended = true;
        $btnFire.disabled = true;
        setStatus(`ğŸ‰ <span class="big">ì „ë¶€ ë„˜ê²¼ë‹¤! ì™„ì „ ìƒì¡´!</span><br>ë‹¤ì‹œ í•˜ë ¤ë©´ ì‹œì‘/ë¦¬ì…‹.`);
      }

      render();
    }

    function resetGame() {
      chamber = [];
      index = 0;
      aliveCount = 0;
      started = false;
      ended = false;

      $btnFire.disabled = true;

      setStatus("ë¦¬ì…‹ ì™„ë£Œ. ì‹œì‘ì„ ëˆ„ë¥´ë©´ ì´ì•Œ ìœ„ì¹˜ê°€ ëœë¤ìœ¼ë¡œ ì •í•´ì ¸.");
      render();
    }

    // ====== ì´ë²¤íŠ¸ ì—°ê²° ======
    $btnStart.addEventListener("click", startGame);
    $btnFire.addEventListener("click", fire);
    $btnReset.addEventListener("click", resetGame);

    // ì´ˆê¸° ë Œë”
    render();
  </script>
</body>
</html>
